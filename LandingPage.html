<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Fresh Cuts</title>
    <link rel="stylesheet" href="landingpage.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
  </head>
  <body>
    <nav>
      <div class="navitems">
        <ul id="loginBtn">
          <a href="loginform.html" target="_blank"><button>Login</button></a>
        </ul>
        <ul id="registerBtn">
          <a href="RegistrationForm.HTML" target="_blank">
            <button>Register Here</button></a
          >
        </ul>
        <ul id="navServices" style="display: none">
          <a href="Services.html"><button>Services</button></a>
        </ul>
        <ul>
          <a href="AboutUs.html"><button>About</button></a>
        </ul>
        <ul>
          <button>Contact Us</button>
        </ul>
        <ul>
          <a href="InvoicePage.html"><button>View Your Invoices</button></a>
        </ul>
        <ul>
          <a href="Cart.html"
            ><button class="cart" style="font-size: 24px">
              <i class="fa fa-shopping-cart"></i>
              <span id="cartBadge" class="cart-badge" aria-live="polite"
                >0</span
              >
            </button></a
          >
        </ul>
        <ul>
          <a href="Checkout.html"><button>Checkout</button></a>
        </ul>
        <ul id="navLogout" style="display: none">
          <button id="logoutBtn">Logout</button>
        </ul>
      </div>
    </nav>
    <div class="CompanyName">
      <h1>
        <span style="color: black">FRESH</span><br />
        <span style="color: greenyellow">CUTS</span> <br />
        <span style="color: gold">JAMAICA</span>
      </h1>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const isLoggedIn = localStorage.getItem("isLoggedIn") === "true";
        if (isLoggedIn) {
          document.getElementById("loginBtn").style.display = "none";
          document.getElementById("registerBtn").style.display = "none";
          document.getElementById("navServices").style.display = "block";

          document.getElementById("navLogout").style.display = "block";
        }

        document.getElementById("logoutBtn")?.addEventListener("click", () => {
          localStorage.removeItem("isLoggedIn");
          localStorage.removeItem("loggedInUser");
          window.location = "loginform.html";
        });
      });
      function updateCartBadge() {
        const badge = document.getElementById("cartBadge");
        const count = parseInt(localStorage.getItem("cartCount") || "0", 10);
        badge.textContent = count;
        badge.style.display = count > 0 ? "inline-flex" : "none";
      }

      document.addEventListener("DOMContentLoaded", () => {
        updateCartBadge();
      });

      window.addEventListener("storage", (e) => {
        if (e.key === "cartCount" || e.key === "cartItems") {
          updateCartBadge();
        }
      });
    </script>
  </body>
</html>
