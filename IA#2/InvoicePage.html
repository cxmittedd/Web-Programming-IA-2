<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Invoices - Fresh Cuts</title>
    <link rel="stylesheet" href="InvoicePage.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Special+Elite&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <h1 style="text-align: center; color: white">View Your Invoice Below</h1>

    <div class="box">
      <!-- Header -->
      <div class="FormHead">
        <img src="./Green Black Lawn Mover Logo.png" alt="Fresh Cuts Logo" />
      </div>

      <!-- Invoice Date and Label -->
      <div class="InvoiceDate">
        <span id="invoiceDate">Date: </span>
        <span>INVOICE</span>
      </div>

      <!-- Customer Info -->
      <div class="UserID">
        <label>Sold to:</label>
        <input type="text" id="customerName" readonly />
      </div>

      <div class="UserAddress">
        <label>Address:</label>
        <input type="text" id="customerAddress" readonly />
      </div>

      <div class="OrderDesc">
        <div class="quantity">
          <label>QTY</label>
          <input type="number" id="qty" readonly />
        </div>
        <div class="desc">
          <label>Description</label>
          <input type="text" id="packageDesc" readonly />
        </div>
        <div class="Total">
          <label>Total</label>
          <input type="text" id="totalPrice" readonly />
        </div>
      </div>
    </div>

    <script>
      // Get logged-in user
      const loggedInUser = localStorage.getItem("loggedInUser") || "Guest";
      const invoicesKey = "invoices_" + loggedInUser;
      const invoices = JSON.parse(localStorage.getItem(invoicesKey) || "[]");

      if (invoices.length === 0) {
        alert("No invoices found for this user.");
      } else {
        // Get latest invoice
        const latest = invoices[invoices.length - 1];

        // Fill invoice fields
        document.getElementById("invoiceDate").textContent =
          "Date: " + latest.date;
        document.getElementById("customerName").value = latest.name;
        document.getElementById("customerAddress").value = latest.address;
        document.getElementById("qty").value = 1;
        document.getElementById("packageDesc").value = latest.package;
        document.getElementById("totalPrice").value =
          "$" + latest.price + " JMD";
      }
    </script>
  </body>
</html>
